/* Copyright (c) Ericsson 2018 */

define("container/SystemBarComponent",["container/api"],function(t){"use strict";function e(t){requestAnimationFrame(function(){r.length>0&&(i=void 0!==t?t:!i,o.querySelector(".eaContainer-SystemBarComponent-list").style.display=i?"block":"none",i?o.classList.add("eaContainer-SystemBarComponent_pressed"):o.classList.remove("eaContainer-SystemBarComponent_pressed"))})}var n=['<div class="eaContainer-SystemBarComponent-body">','<i class="eaContainer-SystemBarComponent-icon"></i>','<span class="eaContainer-SystemBarComponent-caption" style="display:none"></span>','<i class="eaContainer-SystemBarComponent-arrow" style="display:none"></i>',"</div>",'<ul class="eaContainer-SystemBarComponent-list">',"</ul>"].join(""),o=document.createElement("div");o.setAttribute("class","eaContainer-SystemBarComponent"),o.innerHTML=n;var i=!1,a=!0,r=[],s=!1,c=function(){},l={icon:o.querySelector(".eaContainer-SystemBarComponent-icon"),caption:o.querySelector(".eaContainer-SystemBarComponent-caption"),arrow:o.querySelector(".eaContainer-SystemBarComponent-arrow"),list:o.querySelector(".eaContainer-SystemBarComponent-list")},p=function(t){this.options=t};return p.prototype.start=function(n){n.appendChild(o),document.body.addEventListener("click",function(t){o.contains(t.target)||e(!1)}),document.body.addEventListener("touchstart",function(t){o.contains(t.target)||e(!1)}),t.getEventBus().subscribe("container:appchange",function(){e(!1)}),o.addEventListener("click",function(){c(),e()}.bind(this)),this.onStart()},p.prototype.onStart=function(){},p.prototype.setAction=function(t){c=t},p.prototype.getAction=function(){return c},p.prototype.setCaption=function(t){t?(l.caption.textContent=t,l.caption.style.display="inline-block"):l.caption.style.display="none"},p.prototype.getCaption=function(){return l.caption.textContent},p.prototype.setIcon=function(t){t?(l.icon.style.backgroundImage="url('"+t+"')",l.icon.style.display="inline-block"):l.icon.style.display="none"},p.prototype.resolveIconPath=function(t){return this.options.path+"/resources/"+t},p.prototype.getIcon=function(){var t=l.icon.style.backgroundImage;return t.match(/url\(['"]?(.*?)['"]?\)/)[1]},p.prototype.setFixed=function(t){s=t,s?o.classList.add("eaContainer-SystemBarComponent_fixed"):o.classList.remove("eaContainer-SystemBarComponent_fixed")},p.prototype.isFixed=function(){return s},p.prototype.setVisible=function(e){a=e,o.style.display=e?"inline-block":"none",t.getEventBus().publish("container:systembar:redraw")},p.prototype.isVisible=function(){return a},p.prototype.getNativeElement=function(){return o},p.prototype.setItems=function(t,e){var n=!1;r=t,l.list.innerHTML="",l.arrow.style.display="none",l.list.classList.remove("eaContainer-SystemBarComponent-list_hasIcons"),0!==t.length&&(t.some(function(t){if(t.icon)return n=!0,l.list.classList.add("eaContainer-SystemBarComponent-list_hasIcons"),!0}),e||(l.arrow.style.display="inline-block"),t.forEach(function(t){var e=document.createElement("li");if(l.list.appendChild(e),"separator"===t.type)e.setAttribute("class","eaContainer-SystemBarComponent-listSeparator");else{var o=function(t,e){if(n){var o=document.createElement("i");o.setAttribute("class","eaContainer-SystemBarComponent-listItemIcon"),e.icon&&(o.style.backgroundImage="url('"+e.icon+"')"),t.appendChild(o)}},i=function(t,e){t.setAttribute("class","eaContainer-SystemBarComponent-listItem");var n=document.createElement("a");n.setAttribute("class","eaContainer-SystemBarComponent-listItemAnchor"),e.link&&(0===e.link.indexOf("blank:")?(n.setAttribute("href",e.link.substring(6)),n.setAttribute("target","_blank")):n.setAttribute("href",e.link)),n.textContent=e.name,e.action&&t.addEventListener("click",function(){e.action()},!0),t.appendChild(n)};if(t.header){o(e,t),e.setAttribute("class","eaContainer-SystemBarComponent-listHeader");var a=document.createElement("span");a.setAttribute("class","eaContainer-SystemBarComponent-listHeaderSpan"),a.textContent=t.header,e.appendChild(a),t.items.forEach(function(t){var e=document.createElement("li");l.list.appendChild(e),o(e,t),i(e,t)})}else o(e,t),i(e,t)}}))},p.prototype.getItems=function(){return r},p.extend=function(t){var e=function(){p.apply(this,arguments)};e.prototype=new p,e.constructor=e;for(var n in t)e.prototype[n]=t[n];return e},p});
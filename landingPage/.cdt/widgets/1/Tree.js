/* Copyright (c) Ericsson 2019 */

define("text!widgets/Tree/_tree.html",function(){return'<ul class="ebTree"></ul>'}),define("widgets/Tree/TreeView",["jscore/core","text!./_tree.html"],function(e,t){return e.View.extend({getTemplate:function(){return t}})}),define("widgets/Tree/Tree",["jscore/core","widgets/WidgetCore","./TreeView","widgets/tree/Item","widgets/utils/domUtils","widgets/tree/Resolver","jscore/ext/privateStore"],function(e,t,i,n,s,r,o){"use strict";function c(e,t,i,n){var r=this.getElement();r.setStyle({"margin-top":i+"px","margin-bottom":-i+"px"}),s["slide"+e](r,{duration:300,complete:function(){r.setStyle({"margin-top":0,"margin-bottom":0}),t&&t()},start:function(e){e.tweens.forEach(function(e){"marginTop"===e.prop?(e.start=i,e.end=n):"marginBottom"===e.prop&&(e.start=-i,e.end=-n)})}})}function d(e,t){if(t._parent=e,t.children)for(var i=0;i<t.children.length;i++)d(t,t.children[i])}var h=o.create(),u=t.extend({View:i,init:function(t){t&&(h(this).parentItem=void 0!==t.parentItem?t.parentItem:void 0,t.eventBus&&(h(this).eventBus=t.eventBus)),h(this).eventBus||(h(this).eventBus=new e.EventBus),h(this).itemWidgets=[]},onViewReady:function(){var e=this.options.items;if(h(this).parentItem&&this.getElement().setStyle("display","none"),void 0===h(this).parentItem&&(h(this).eventBus.subscribe("_itemexpand",function(e){this.trigger("itemexpand",e)},this),h(this).eventBus.subscribe("_itemcollapse",function(e){this.trigger("itemcollapse",e)},this),h(this).eventBus.subscribe("_itemselect",function(e){this.deselect(),e.view.getItemContent().setModifier("selected"),h(this).lastSelectedItem=e,this.trigger("itemselect",e)},this),h(this).eventBus.subscribe("_itemchecked",function(e,t){this.trigger("itemchecked",e,t)},this),h(this).eventBus.subscribe("_itemdestroy",function(e){this.trigger("itemdestroy",e)},this),e)){for(var t=0;t<e.length;t++)d(void 0,e[t]);for(var i=0;i<e.length;i++)r.resolveCheckbox(e[i])}e&&e.forEach(function(e){this.addItem(e)}.bind(this))},getSelectedItem:function(){return h(this).lastSelectedItem},addItem:function(e,t){var i=new n({item:e,Tree:u,parentTree:this,eventBus:h(this).eventBus,parentItem:h(this).parentItem});if(i.attachTo(this.getElement()),void 0===t||t<0)return h(this).itemWidgets.push(i),i;0===t?h(this).itemWidgets.unshift(i):h(this).itemWidgets.splice(t,0,i);var s=i.getElement().getNative(),r=s.parentNode,o=r.children.length;return o&&o>1&&t<o&&r.insertBefore(s,this.getElement().children()[t].getNative()),i},getItems:function(){return h(this).itemWidgets},getItem:function(e){return h(this).itemWidgets[e]},removeItem:function(e){for(var t=0;t<h(this).itemWidgets.length;t++)if(h(this).itemWidgets[t]===e){h(this).itemWidgets.splice(t,1);break}e.destroy()},find:function(e){var t=function(t){var i=!0,n=t.getDefinition();for(var s in e)if(n[s]!==e[s]){i=!1;break}return i},i=function(e){for(var n=e.getItems(),s=0;s<n.length;s++){if(t(n[s]))return n[s];if(n[s].getItems().length>0){var r=i(n[s]);if(r)return r}}};return i(this)},expand:function(){c.call(this,"Down",void 0,-5,0)},collapse:function(){c.call(this,"Up",void 0,0,-5)},deselect:function(){h(this).lastSelectedItem&&h(this).lastSelectedItem.view.getItemContent().removeModifier("selected"),h(this).lastSelectedItem=void 0}});return u}),define("widgets/Tree",["widgets/Tree/Tree"],function(e){return e});
/* Copyright (c) Ericsson 2019 */

define("widgets/MultiSelectBox/MultiSelectBox",["widgets/SelectBox","jscore/ext/privateStore"],function(e,t){"use strict";function s(){var e=n(this).caption(n(this).selectedItems.length);this.view.getValueEl().setText(e)}function i(e){return e+" Selected"}var n=t.create();return e.extend({onInit:function(){n(this).caption=this.options.caption||i,this.setOption("checkboxes",!0),this.setOption("quickItemFocus",!0),n(this).selectedItems=[]},onControlReady:function(){},setValue:function(e){function t(e){return"undefined"!=typeof e}function i(e){return"object"==typeof e?e.value:e}var c=e.map(i).filter(t);n(this).selectedItems=[],this.setCheckboxes(function(e){var t=c.indexOf(e.value)>=0;return t&&n(this).selectedItems.push(e),t}.bind(this)),s.call(this)},restore:function(){var e=this.options.items;e&&this.setItems(e)},clearSelection:function(){this.setValue([])},getValue:function(){return n(this).selectedItems},onItemsSet:function(){if(n(this).focusableItemsCount=0,n(this).selectedItems=[],n(this).focusableItems=this.getItems("focusable"),n(this).focusableItems)for(var e=0;e<n(this).focusableItems.length;e++)"separator"!==n(this).focusableItems[e].type&&(n(this).focusableItemsCount++,n(this).focusableItems[e].checked&&n(this).selectedItems.push(n(this).focusableItems[e]));s.call(this)},getSelectedItems:function(){return n(this).selectedItems},onItemSelected:function(e){n(this).selectedItems=e,s.call(this),this.trigger("change"),this.getFocusableElement().focus()}})}),define("widgets/MultiSelectBox",["widgets/MultiSelectBox/MultiSelectBox"],function(e){return e});
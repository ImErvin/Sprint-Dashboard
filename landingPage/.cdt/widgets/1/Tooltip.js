/* Copyright (c) Ericsson 2019 */

define("text!widgets/Tooltip/_tooltip.html",function(){return'<div class="ebTooltip">\n    <div class="ebTooltip-outer">\n        <div class="ebTooltip-contentText"></div>\n    </div>\n</div>\n'}),define("widgets/Tooltip/TooltipView",["jscore/core","widgets/utils/domUtils","text!./_tooltip.html"],function(t,e,i){"use strict";function n(t){this.currentCorner!==t&&(this.setCorner(t),this.currentCorner=t)}var o=t.View.extend({afterRender:function(){var t=this.getElement();this.outerEl=t.find("."+o.OUTER_CLASS),this.content=t.find("."+o.CONTENT_CLASS)},getTemplate:function(){return i},setVisible:function(t){this.getElement().setModifier("visible",""+t)},setFade:function(t){var e=this.getElement();t?e.setModifier("fades"):e.removeModifier("fades")},setCorner:function(t){this.outerEl.setModifier("corner",t)},calcCorner:function(t,i){this.outerElDimensions=e.getElementDimensions(this.outerEl),this.cornerName="";var o={left:t.width-i.left,top:t.height-i.top};this.cornerName+=o.top<this.outerElDimensions.height+30?"bottom":"top",this.cornerName+=o.left<this.outerElDimensions.width+30?"Right":"Left","topLeft"===this.cornerName&&(this.cornerName="default"),n.call(this,this.cornerName)},setDisplayType:function(t){this.getElement().setStyle("display",t)},setContentText:function(t){this.content.setText(t)},setContent:function(t){"string"==typeof t?this.content.setText(t):t.attachTo(this.content)},getContent:function(){return this.content},setPosition:function(t,e){var i=t;"bottomRight"!==this.cornerName&&"topRight"!==this.cornerName||(i=t-this.outerElDimensions.width),this.getElement().setStyle({left:i,top:e})}},{OUTER_CLASS:"ebTooltip-outer",CONTENT_CLASS:"ebTooltip-contentText"});return o}),define("widgets/Tooltip/Tooltip",["widgets/WidgetCore","widgets/utils/domUtils","./TooltipView","jscore/core"],function(t,e,i,n){"use strict";function o(t){var i={viewport:e.getMousePosEvt(t),document:e.getDocumentMousePosition(t)};a.call(this,i),this.previousMousePos=i}function s(){l.call(this,!1),this.fade?this.exitTransitionEventId=this.getElement().addEventHandler("transitionend",function(){this.detach(),this.getElement().removeEventHandler(this.exitTransitionEventId),delete this.exitTransitionEventId}.bind(this)):this.detach()}function h(t){this.view.calcCorner(e.getWindowDimensions(),t)}function r(t,e){this.view.setPosition(t,e)}function l(t){this.view.setVisible(t)}function a(t){h.call(this,t.viewport);var e=t.document;r.call(this,e.left,e.top)}function d(){this.attachTo(n.Element.wrap(document.body));var t=this.previousMousePos;l.call(this,!0),a.call(this,t),this.timeoutFunction=setTimeout(function(){s.call(this),clearTimeout(this.timeoutFunction)}.bind(this),this.timeout)}function c(){s.call(this),this.startTimeoutFunction&&clearTimeout(this.startTimeoutFunction),this.timeoutFunction&&clearTimeout(this.timeoutFunction)}return t.extend({View:i,onViewReady:function(){var t=this.options;t.content?this.setContent(t.content):t.contentText&&this.setContentText(t.contentText),this.setModifiers(t.modifiers||[]),this.setWidth(t.width),this.enabled=t.enabled!==!1,this.timeout=t.timeout||5e3,this.delay=t.delay||500,this.fade=void 0===t.fade||t.fade,this.view.setFade(this.fade),l.call(this,!1),this.addHoverHandler(t.parent),setTimeout(function(){this.detach()}.bind(this),1)},onDestroy:function(){c.call(this);var t=this.parent;t&&(t.removeEventHandler(this._mouseLeaveEvent),t.removeEventHandler(this._mouseEnterEvent),t.removeEventHandler(this._mouseMoveEvent),this.parent=void 0)},setContentText:function(t){this.view.setContentText(t)},setContent:function(t){this.view.setContent(t)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1,l.call(this,!1)},setWidth:function(t){t&&this.getElement().setStyle("width",t)},addHoverHandler:function(t){t&&(this.parent=t,this._mouseEnterEvent=t.addEventHandler("mouseenter",function(t){this.enabled&&(t.stopPropagation(),o.call(this,t),this.exitTransitionEventId&&(this.getElement().removeEventHandler(this.exitTransitionEventId),delete this.exitTransitionEventId),this.startTimeoutFunction=setTimeout(function(){d.call(this)}.bind(this),this.delay))}.bind(this)),this._mouseMoveEvent=t.addEventHandler("mousemove",function(t){this.enabled&&(t.stopPropagation(),o.call(this,t))}.bind(this)),this._mouseLeaveEvent=t.addEventHandler("mouseleave",function(t){this.enabled&&(t.stopPropagation(),c.call(this))}.bind(this)))}})}),define("widgets/Tooltip",["widgets/Tooltip/Tooltip"],function(t){return t});
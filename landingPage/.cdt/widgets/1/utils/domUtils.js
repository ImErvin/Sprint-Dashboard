/* Copyright (c) Ericsson 2019 */

define("widgets/utils/domUtils",["jscore/base/jquery","jscore/core"],function(t,e){"use strict";function n(){var t,e=document.createElement("div"),n={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(n.hasOwnProperty(t)&&void 0!==e.style[t])return n[t];return"webkitTransitionEnd"}return{addWindowResizeHandler:function(t,n,i){e.Window.addEventHandler("resize",t.bind(n))},removeWindowResizeHandler:function(t,e,n){window.removeEventListener("resize",t.bind(e),n)},getWindowDimensions:function(){return{width:window.innerWidth,height:window.innerHeight}},getElementDimensions:function(t){var e=t.getNative();return{width:e.clientWidth,height:e.clientHeight}},findAll:function(n,i){var o;i&&(o=t(t.find(n,i.getNative())));var r=[];return o.each(function(){var n=t(this),i=n.data("element");i?r.push(i):(r.push(e.Element.wrap(this)),n.data("element",i))}),r},stopPropagation:function(t){var e=t.originalEvent||window.event;t.preventDefault(),e.stopPropagation()},delegate:function(t,n,i,o,r){var d=t.getNative().querySelectorAll(n);[].forEach.call(d,function(t){e.Element.wrap(t).addEventHandler(i,o.bind(r))})},getMousePosEvt:function(t){var e=t.originalEvent||window.event;return{left:e.clientX,top:e.clientY}},getDocumentMousePosition:function(t){var e=this.getMousePosEvt(t),n=e.top,i=e.left;if(this.isTouchZoomActive()){var o=document.body,r=document.documentElement,d=window.pageYOffset||r.scrollTop||o.scrollTop,l=window.pageXOffset||r.scrollLeft||o.scrollLeft,c=r.clientTop||o.clientTop||0,s=r.clientLeft||o.clientLeft||0;n+=d-c,i+=l-s}return{left:i,top:n}},getOuterHeight:function(e){if(e)return t(e.getNative()).outerHeight(!0)},slideDown:function(e,n){t(e.getNative()).slideDown(n)},scrollIntoView:function(t,e){var n=t.getPosition(),i=e.getPosition();n.bottom>i.bottom?t.getNative().scrollIntoView(!1):n.top<i.top&&t.getNative().scrollIntoView(!0)},slideUp:function(e,n){t(e.getNative()).slideUp(n)},hasModifier:function(t,e,n){var i=(n&&""!==n?n:t._modifierPrefix)+"_"+e;return t._modifiers&&t._modifiers[i]},getDocumentPosition:function(t){var e=t.getNative(),n=e.getBoundingClientRect(),i=document.body,o=document.documentElement,r=window.pageYOffset||o.scrollTop||i.scrollTop,d=window.pageXOffset||o.scrollLeft||i.scrollLeft,l=o.clientTop||i.clientTop||0,c=o.clientLeft||i.clientLeft||0,s=n.top+r-l,a=n.left+d-c,u=s+t.getProperty("offsetHeight"),f=a+t.getProperty("offsetWidth");return{top:Math.round(s),left:Math.round(a),bottom:Math.round(u),right:Math.round(f)}},isTouchZoomActive:function(){var t=document.documentElement;return t.clientHeight/window.innerHeight>1&&t.clientWidth/window.innerWidth>1},isTouchKeyboardOpen:function(){var t=document.documentElement;return t.clientHeight/window.innerHeight>1&&t.clientWidth/window.innerWidth===1},isTouchZoomActiveWithKeyboard:function(){var t=document.documentElement,e=t.clientHeight/window.innerHeight,n=t.clientWidth/window.innerWidth;return e>1&&n>1&&e>n},getElementPosition:function(t){return this.isTouchZoomActive()?this.getDocumentPosition(t):t.getPosition()},getScrollbarWidth:function(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",document.body.appendChild(t);var e=t.offsetWidth;t.setAttribute("class","eb_scrollbar"),t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var i=n.offsetWidth;return t.parentNode.removeChild(t),e-i},transitionEventName:n()}});
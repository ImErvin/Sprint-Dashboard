/* Copyright (c) Ericsson 2019 */

define("template!widgets/DatePicker/daysrows/_daysRows.html",["jscore/handlebars/handlebars"],function(e){return e.template(function(e,t,i,a,n){function s(e,t){var i="";return i+="\n            <th>"+d(typeof e===c?e.apply(e):e)+"</th>\n        "}function r(e,t){var a,n="";return n+="<tr>\n            ",a=i.each.call(e,e&&e.days,{hash:{},inverse:u.noop,fn:u.program(4,o,t)}),(a||0===a)&&(n+=a),n+="\n        </tr>"}function o(e,t){var a,n,s="";return s+='<td><span class="',(n=i.classes)?a=n.call(e,{hash:{}}):(n=e&&e.classes,a=typeof n===c?n.call(e,{hash:{}}):n),s+=d(a)+'">',(n=i.day)?a=n.call(e,{hash:{}}):(n=e&&e.day,a=typeof n===c?n.call(e,{hash:{}}):n),s+=d(a)+"</span></td>"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers);var l,h="",c="function",d=this.escapeExpression,u=this;return h+='<table class="ebDatePicker-body">\n    <thead>\n    <tr>\n        ',l=i.each.call(t,t&&t.dayName,{hash:{},inverse:u.noop,fn:u.program(1,s,n)}),(l||0===l)&&(h+=l),h+="\n    </tr>\n    </thead>\n    <tbody>\n        ",l=i.each.call(t,t&&t.weeks,{hash:{},inverse:u.noop,fn:u.program(3,r,n)}),(l||0===l)&&(h+=l),h+="\n    </tbody>\n</table>"})}),define("widgets/DatePicker/daysrows/DaysRowsView",["jscore/core","template!./_daysRows.html"],function(e,t){"use strict";return e.View.extend({getTemplate:function(){return t(this.options.template.rows)}})}),define("widgets/DatePicker/daysrows/DaysRows",["widgets/WidgetCore","./DaysRowsView","widgets/utils/datePickerUtils"],function(e,t,i){"use strict";function a(e,t,a){var s=[];n.call(this,e,t,a)&&(s.push(" "),s.push(this.dayClass),s.push("_disabled"));var r=this.options.selected||null;return null!==r&&r.getFullYear()===e&&r.getMonth()===t&&r.getDate()===a&&(s.push(" "),s.push(this.dayClass),s.push("_selected")),i.isToday(e,t,a)&&(s.push(" "),s.push(this.dayClass),s.push("_today")),s.join("")}function n(e,t,i){var a=!1,n=this.options.disableDay;n&&n(e,t,i)&&(a=a||!0);var s=this.options.dateInRange;return s&&(s(e,t,i)||(a=a||!0)),a}return e.extend({view:function(){return new t({template:{rows:this.options.rows,dayName:this.options.dayName}})},init:function(e){var t;e=e||{},e.rows={weeks:[]};var n=e.days;if(void 0===n)throw new Error('Option "days" should be defined for DaysRows widget!');if(!(n instanceof Array))throw new Error('Option "days" should be an array');e.rows.dayName=i.getDayNames("short"),this.dayClass="ebDatePicker-day";var s,r,o;for(t=0;t<42;t++)s=n[t],r={},o||(o={days:[]}),void 0!==s?(r.day=s,r.classes=this.dayClass+a.call(this,e._visibleYear,e._visibleMonth,s)):(r.day="",r.classes=this.dayClass+" "+this.dayClass+"_other"),o.days.push(r),(t+1)%7===0&&(e.rows.weeks.push(o),o=void 0);this.options=e}})}),define("text!widgets/DatePicker/_datePicker.html",function(){return'<div data-namespace="ebDatePicker">\n    <div data-name="head">\n        <div data-name="prev">\n            <div data-name="prevYear">\n                <i class="ebIcon ebIcon_small ebIcon_prevArrow_10px ebIcon_interactive eb_noVertAlign"></i>\n            </div>\n            <div data-name="prevMonth">\n                <i class="ebIcon ebIcon_small ebIcon_leftArrow_10px ebIcon_interactive eb_noVertAlign"></i>\n            </div>\n        </div>\n        <div data-name="monthYear"></div>\n        <div data-name="next">\n            <div data-name="nextYear">\n                <i class="ebIcon ebIcon_small ebIcon_nextArrow_10px ebIcon_interactive eb_noVertAlign"></i>\n            </div>\n            <div data-name="nextMonth">\n                <i class="ebIcon ebIcon_small ebIcon_rightArrow_10px ebIcon_interactive eb_noVertAlign"></i>\n            </div>\n        </div>\n    </div>\n    <div data-name="tableHolder"></div>\n</div>'}),define("widgets/DatePicker/DatePickerView",["jscore/core","text!./_datePicker.html","widgets/utils/dataNameUtils"],function(e,t,i){"use strict";var a=e.View.extend({getTemplate:function(){return i.translate(null,t,this)},getRoot:function(){return this.getElement()},getTable:function(){return this[a.EL_TABLE]},getDays:function(){return this[a.EL_DAYS]},getPrevYearButton:function(){return this[a.EL_PREV_YEAR]},getPrevMonthButton:function(){return this[a.EL_PREV_MONTH]},getMonthYearTitle:function(){return this[a.EL_MONTH_YEAR]},getNextMonthButton:function(){return this[a.EL_NEXT_MONTH]},getNextYearButton:function(){return this[a.EL_NEXT_YEAR]}},{EL_PREV_YEAR:"prevYear",EL_PREV_MONTH:"prevMonth",EL_MONTH_YEAR:"monthYear",EL_NEXT_MONTH:"nextMonth",EL_NEXT_YEAR:"nextYear",EL_TABLE:"tableHolder",EL_DAYS:"days"});return a}),define("widgets/DatePicker/DatePicker",["widgets/WidgetCore","./DatePickerView","./daysrows/DaysRows","widgets/utils/datePickerUtils","widgets/utils/parserUtils","widgets/utils/domUtils"],function(e,t,i,a,n,s){"use strict";function r(){var e,t=this.options.defaultDate;return t&&t instanceof Date?e=t:t instanceof Function?e=t():(e=new Date,e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),e}function o(e,t){this._visibleMonth=t,this._visibleYear=e;var i=a.getMonthYearRelative(e,t,-12),n=a.getMonthYearRelative(e,t,-1),s=a.getMonthYearRelative(e,t,1),r=a.getMonthYearRelative(e,t,12),o=_.call(this,i.year);l(this.view.getPrevYearButton(),o);var c=g.call(this,n.year,n.month);l(this.view.getPrevMonthButton(),c);var d=g.call(this,s.year,s.month);l(this.view.getNextMonthButton(),d);var u=_.call(this,r.year);l(this.view.getNextYearButton(),u),h.call(this)}function l(e,t){t?(e.find(".ebIcon").setModifier("disabled"),e.setAttribute("disabled","disabled")):(e.find(".ebIcon").removeModifier("disabled"),e.removeAttribute("disabled"))}function h(){var e=a.getDays(this._visibleYear,this._visibleMonth);this.daysRow&&this.daysRow.destroy(),this.daysRow=new i({days:e,i18nDateTime:this._i18nDateTime,_visibleYear:this._visibleYear,_visibleMonth:this._visibleMonth,dateInRange:this.options.dateInRange,disableDay:this.options.disableDay,selected:this.getValue()}),this.daysRow.attachTo(this.view.getTable()),s.delegate(this.view.getTable(),"span:not(.ebDatePicker-day_other):not(.ebDatePicker-day_disabled)","click",function(e){var t=e.originalEvent.target;requestAnimationFrame(function(){var e=n.parseInt(t.textContent);if(e&&!isNaN(e)){var i=a.cloneDate(this._selectedDate);this.utc?this._selectedDate=new Date(Date.UTC(this._visibleYear,this._visibleMonth,e,0,0,0,0)):this._selectedDate=new Date(this._visibleYear,this._visibleMonth,e,0,0,0,0),h.call(this),this.trigger("dateselect",this.getValue()),i&&i.getFullYear()===this._selectedDate.getFullYear()&&i.getDate()===this._selectedDate.getDate()&&i.getDay()===this._selectedDate.getDay()||this.trigger("change",this.getValue())}}.bind(this))},this);var t=a.getMonthName(this._visibleMonth)+" "+this._visibleYear;this.view.getMonthYearTitle().setText(t)}function c(){var e=a.getMonthYearRelative(this._visibleYear,this._visibleMonth,-12);_.call(this,e.year)||o.call(this,e.year,e.month)}function d(){var e=a.getMonthYearRelative(this._visibleYear,this._visibleMonth,-1);g.call(this,e.year,e.month)||o.call(this,e.year,e.month)}function u(){var e=a.getMonthYearRelative(this._visibleYear,this._visibleMonth,1);g.call(this,e.year,e.month)||o.call(this,e.year,e.month)}function v(){var e=a.getMonthYearRelative(this._visibleYear,this._visibleMonth,12);_.call(this,e.year)||o.call(this,e.year,e.month)}function _(e){var t=this.options.dateInRange;return!(!t||t(e,this._visibleMonth,a.getDaysInMonth(e,this._visibleMonth))||t(e,this._visibleMonth,1))}function g(e,t){var i=this.options.dateInRange;return!(!i||i(e,t,a.getDaysInMonth(e,t))||i(e,t,1))}return e.extend({View:t,onViewReady:function(){this._selectedDate=null,this.utc=this.options.utc===!0;var e=this.view;e.getPrevYearButton().addEventHandler("click",c,this),e.getPrevMonthButton().addEventHandler("click",d,this),e.getNextMonthButton().addEventHandler("click",u,this),e.getNextYearButton().addEventHandler("click",v,this),this.setValue(this.options.value||null)},getValue:function(){return null!==this._selectedDate?a.cloneDate(this._selectedDate):this._selectedDate},setValue:function(e){e instanceof Date||(e=r.call(this)),e=a.cloneDate(e),e instanceof Date&&(this._selectedDate=e),this._visibleMonth=this.utc?e.getUTCMonth():e.getMonth(),this._visibleYear=this.utc?e.getUTCFullYear():e.getFullYear(),this.redraw()},_getPlaceholder:function(e){e=e||{};var t="international"!==this.options.mode?"locale":"international",i=e.DD||"DD";return a.formatDatetime(new Date(Date.UTC(33,10,22)),"D",t).replace("22",i).replace("21",i).replace("11",e.MM||"MM").replace("1933",e.YYYY||"YYYY")},_getValueAsString:function(){var e=this._selectedDate,t="international"!==this.options.mode?"locale":"international";return a.formatDatetime(e,"D",t,this.utc)},redraw:function(){if(this._visibleMonth||this._visibleYear)o.call(this,this._visibleYear,this._visibleMonth);else{var e=r.call(this);o.call(this,e.getFullYear(),e.getMonth())}}})}),define("widgets/DatePicker",["widgets/DatePicker/DatePicker"],function(e){return e});
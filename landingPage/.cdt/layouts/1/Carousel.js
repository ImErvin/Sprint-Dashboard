/* Copyright (c) Ericsson 2018 */

define("layouts/ext/ext.dom",["jscore/base/jquery","jscore/core"],function(e,t){function n(){var e;return e=navigator.userAgent.indexOf("Gecko/")!==-1?"Firefox":navigator.userAgent.indexOf("Trident/")!==-1?"MSIE":"WebKit"}function r(){var e,t=document.createElement("div"),n={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(n.hasOwnProperty(e)&&void 0!==t.style[e])return n[e];return"webkitTransitionEnd"}var i={WebKit:"webkitAnimationEnd",Firefox:"animationend",MSIE:"animationend"},o={transitionEventName:r(),animEndEventName:i[n()],getWindowDimensions:function(){return{width:window.innerWidth,height:window.innerHeight}},getScrollbarWidth:function(e){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var n=t.offsetWidth;e&&t.setAttribute("class","eb_scrollbar"),t.style.overflow="scroll";var r=document.createElement("div");r.style.width="100%",t.appendChild(r);var i=r.offsetWidth;return t.parentNode.removeChild(t),n-i},animate:function(t,n,r,i){e(t._getHTMLElement()).animate(n,r,i)},position:function(t){return e(t._getHTMLElement()).position()},offset:function(t){return e(t._getHTMLElement()).offset()},outerWidth:function(t,n){return e(t._getHTMLElement()).outerWidth(!!n)}};return o}),define("styles!layouts/carousel/carousel.less",function(){return".elLayouts-Carousel {\n  position: relative;\n}\n.elLayouts-Carousel-main {\n  margin: 0 28px;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n.elLayouts-Carousel-main_noArrows {\n  margin: 0;\n}\n.elLayouts-Carousel-holder {\n  -webkit-transition: margin-left 0.3s ease-in-out;\n  transition: margin-left 0.3s ease-in-out;\n}\n.elLayouts-Carousel-widget {\n  float: left;\n}\n.elLayouts-Carousel-leftArrow {\n  background-image: url('layouts/1/resources/layouts/carousel/left_arrow_lrg.svg');\n  position: absolute;\n  top: calc(50% - 16px);\n  left: 0;\n  width: 20px;\n  height: 32px;\n  cursor: pointer;\n  opacity: 0.6;\n}\n.elLayouts-Carousel-leftArrow:hover,\n.elLayouts-Carousel-leftArrow:focus {\n  opacity: 1;\n}\n.elLayouts-Carousel-rightArrow {\n  background-image: url('layouts/1/resources/layouts/carousel/right_arrow_lrg.svg');\n  position: absolute;\n  top: calc(50% - 16px);\n  right: 0;\n  width: 20px;\n  height: 32px;\n  cursor: pointer;\n  opacity: 0.6;\n}\n.elLayouts-Carousel-rightArrow:hover,\n.elLayouts-Carousel-rightArrow:focus {\n  opacity: 1;\n}\n.elLayouts-Carousel-leftArrow,\n.elLayouts-Carousel-rightArrow {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n"}),define("text!layouts/carousel/carousel.html",function(){return'<div class="elLayouts-Carousel">\r\n\t<div class="elLayouts-Carousel-leftArrow" tabindex="0"></div>\r\n\t<div class="elLayouts-Carousel-main">\r\n\t\t<div class="elLayouts-Carousel-holder">\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="elLayouts-Carousel-rightArrow" tabindex="0"></div>\r\n</div>\r\n'}),define("layouts/carousel/CarouselView",["jscore/core","text!./carousel.html","styles!./carousel.less"],function(e,t,n){var r=e.View.extend({getTemplate:function(){return t},getStyle:function(){return n},getMain:function(){return this.getElement().find("."+r.EL+"-main")},getHolder:function(){return this.getElement().find("."+r.EL+"-holder")},getLeftArrow:function(){return this.getElement().find("."+r.EL+"-leftArrow")},getRightArrow:function(){return this.getElement().find("."+r.EL+"-rightArrow")},hideArrows:function(){this.getMain().setModifier("noArrows")},showArrows:function(){this.getMain().removeModifier("noArrows")}},{EL:"elLayouts-Carousel"});return r}),define("layouts/carousel/Carousel",["jscore/core","widgets/utils/domUtils","widgets/WidgetCore","./CarouselView","jscore/ext/privateStore","../ext/ext.dom"],function(e,t,n,r,i,o){"use strict";function s(){var e=u.call(this);if(e!==this.currentResolution){var t=this.resolutions[e]?this.resolutions[e]:this.defaultResolution;this.setOptions(t),this.currentResolution=e}}function u(){var e=t.getWindowDimensions().width,n=!1;return this.resolutionLowerBounds.forEach(function(t,r){!n&&e<t&&(n=this.bounds[r])}.bind(this)),n===!1&&(n=this.bounds[this.bounds.length-1]),n}var l=13,a=i.create();return n.extend({View:r,init:function(t){this.widgets=t.widgets,this.widgetsPerRow=t.widgetsPerRow||1,this.numberOfRows=t.numberOfRows||1,this.screenCount=Math.ceil(this.widgets.length/(this.widgetsPerRow*this.numberOfRows)),this.currentScreen=1,this.resolutionLowerBounds=t.resolutionLowerBounds||[768,992],this.resolutions=t.resolutions||!1,this.defaultResolution={widgetsPerRow:t.widgetsPerRow||1,numberOfRows:t.numberOfRows||1},this.bounds=["low","medium","high"],a(this).resizeEvent=e.Window.addEventHandler("resize",function(e){s.call(this)}.bind(this))},onViewReady:function(){this.widgetHolders=this.widgets.map(function(t){var n=e.Element.parse("<div class='"+r.EL+"-widget'/>");return n.append(t.getElement()),this.view.getHolder().append(n),n}.bind(this)),this.view.getLeftArrow().addEventHandler("click",function(){this.goToScreen(this.currentScreen-1)}.bind(this)),this.view.getRightArrow().addEventHandler("click",function(){this.goToScreen(this.currentScreen+1)}.bind(this)),this.view.getLeftArrow().addEventHandler("keypress",function(e){e.originalEvent.keyCode===l&&this.goToScreen(this.currentScreen-1)}.bind(this)),this.view.getRightArrow().addEventHandler("keypress",function(e){e.originalEvent.keyCode===l&&this.goToScreen(this.currentScreen+1)}.bind(this)),this.refresh()},onDestroy:function(){e.Window.removeEventHandler(a(this).resizeEvent)},setOptions:function(e){var t=this.widgetsPerRow*this.numberOfRows*(this.currentScreen-1);e.widgetsPerRow&&(this.widgetsPerRow=e.widgetsPerRow),e.numberOfRows&&(this.numberOfRows=e.numberOfRows),e.resolutionLowerBounds&&(this.resolutionLowerBounds=e.resolutionLowerBounds),e.resolutions&&(this.resolutions=e.resolutions),this.currentScreen=Math.ceil((t+1)/(this.widgetsPerRow*this.numberOfRows)),this.screenCount=Math.ceil(this.widgets.length/(this.widgetsPerRow*this.numberOfRows)),this.refresh()},getNumberOfWidgets:function(){return this.widgets.length},getCurrentOptions:function(){var e={numberOfRows:this.numberOfRows,widgetsPerRow:this.widgetsPerRow};return e},getCurrentScreen:function(){return this.currentScreen},getTotalScreens:function(){return this.screenCount},getCurrentResolution:function(){return!!this.currentResolution&&this.currentResolution},refresh:function(){this.view.getHolder().setStyle("width",100*this.screenCount+"%"),this.widgetHolders.forEach(function(e){e.setStyle("width",100/this.widgetsPerRow/this.screenCount+"%")}.bind(this)),this.goToScreen(this.currentScreen,!0)},goToScreen:function(e,t){if(e=parseInt(e),!(e<=0||e>this.getTotalScreens()||isNaN(e))){if(this.currentScreen=e,!t){var n=this.view.getHolder(),r=n.addEventHandler(o.transitionEventName,function(){this.trigger("afterchange",e),r.destroy()}.bind(this));this.trigger("beforechange",e)}this.view.getHolder().setStyle("margin-left","-"+100*(this.currentScreen-1)+"%"),1===this.currentScreen?this.view.getLeftArrow().setStyle("display","none"):this.view.getLeftArrow().setStyle("display","block"),this.currentScreen===this.screenCount?this.view.getRightArrow().setStyle("display","none"):this.view.getRightArrow().setStyle("display","block"),1===this.currentScreen&&this.currentScreen===this.screenCount?this.view.hideArrows():this.view.showArrows()}}})}),define("layouts/Carousel",["layouts/carousel/Carousel"],function(e){return e});
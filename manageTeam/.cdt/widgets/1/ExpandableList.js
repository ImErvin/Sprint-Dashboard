/* Copyright (c) Ericsson 2019 */

define("styles!widgets/ExpandableList/ExpandableListItem/_expandableListItem.less",function(){return".elWidgets-ExpandableListItem-link {\n  display: block;\n  color: #333;\n  font-size: 1.2rem;\n  line-height: 1.4rem;\n  padding: 6px 0;\n}\n"}),define("template!widgets/ExpandableList/ExpandableListItem/_expandableListItem.html",["jscore/handlebars/handlebars"],function(e){return e.template(function(e,t,i,s,n){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers);var o,a,l="",h="function",r=this.escapeExpression;return l+='<li class="elWidgets-ExpandableListItem">\n    <a class="elWidgets-ExpandableListItem-link" href="#">',(a=i.label)?o=a.call(t,{hash:{}}):(a=t&&t.label,o=typeof a===h?a.call(t,{hash:{}}):a),l+=r(o)+"</a>\n</li>"})}),define("widgets/ExpandableList/ExpandableListItem/ExpandableListItemView",["jscore/core","template!./_expandableListItem.html","styles!./_expandableListItem.less"],function(e,t,i){"use strict";var s=e.View.extend({afterRender:function(){this.link=this.getElement().find("."+s.EL_ITEM_LINK)},getTemplate:function(){return t(this.options)},getStyle:function(){return i},getLink:function(){return this.link}},{EL_ITEM_LINK:"elWidgets-ExpandableListItem-link"});return s}),define("widgets/ExpandableList/ExpandableListItem/ExpandableListItem",["widgets/WidgetCore","./ExpandableListItemView"],function(e,t){"use strict";return e.extend({init:function(e){this.options=e,this.view=new t(this.options)},onViewReady:function(){this.view.getLink().addEventHandler("click",this.triggerCallback,this)},triggerCallback:function(e){e.preventDefault(),this.options.callback(this.options.model)}})}),define("styles!widgets/ExpandableList/_expandableList.less",function(){return".elWidgets-ExpandableList-topList,\n.elWidgets-ExpandableList-moreList {\n  list-style-type: none;\n  padding: 0 20px;\n  margin: 0;\n}\n.elWidgets-ExpandableList-moreList {\n  margin-top: 0;\n  overflow: hidden;\n  max-height: 0;\n}\n.elWidgets-ExpandableList-showMore {\n  display: block;\n  margin: 6px 20px;\n}\n.elWidgets-ExpandableList-showMore_hidden {\n  display: none;\n}\n"}),define("template!widgets/ExpandableList/_expandableList.html",["jscore/handlebars/handlebars"],function(e){return e.template(function(e,t,i,s,n){function o(e,t){var s,n,o="";return o+='<h4 class="elWidgets-ExpandableList-header">',(n=i.header)?s=n.call(e,{hash:{}}):(n=e&&e.header,s=typeof n===h?n.call(e,{hash:{}}):n),o+=r(s)+"</h4>"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers);var a,l="",h="function",r=this.escapeExpression,d=this;return l+='<div class="elWidgets-ExpandableList">\n    ',a=i.if.call(t,t&&t.header,{hash:{},inverse:d.noop,fn:d.program(1,o,n)}),(a||0===a)&&(l+=a),l+='\n    <ul class="elWidgets-ExpandableList-topList"></ul>\n    <ul class="elWidgets-ExpandableList-moreList"></ul>\n    <a href="#" class="elWidgets-ExpandableList-showMore elWidgets-ExpandableList-showMore_hidden">More</a>\n</div>'})}),define("widgets/ExpandableList/ExpandableListView",["jscore/core","template!./_expandableList.html","styles!./_expandableList.less"],function(e,t,i){"use strict";var s=e.View.extend({afterRender:function(){var e=this.getElement();this.header=e.find("."+s.EL_HEADER_CLASS),this.topList=e.find("."+s.EL_TOP_LIST_CLASS),this.moreList=e.find("."+s.EL_MORE_LIST_CLASS),this.showMore=e.find("."+s.EL_SHOW_MORE_CLASS)},init:function(){this.moreListHeight=0},getTemplate:function(){return t(this.options)},getStyle:function(){return i},getHeader:function(){return this.header},getTopList:function(){return this.topList},getMoreList:function(){return this.moreList},getShowMoreLink:function(){return this.showMore},hideShowMoreLink:function(){this.getShowMoreLink().setModifier("hidden")},showShowMoreLink:function(){this.getShowMoreLink().removeModifier("hidden")},animateCollapseMoreList:function(){this.getMoreList().setStyle("transition","max-height 0.3s ease-in-out"),this.getMoreList().setStyle("max-height","0"),this.getShowMoreLink().setText("More"),setTimeout(function(){this.getMoreList().setStyle("transition","none")}.bind(this),300)},animateExpandMoreList:function(){this.getMoreList().setStyle("transition","max-height 0.3s ease-in-out"),this.getMoreList().setStyle("max-height",this.moreListHeight+"px"),this.getShowMoreLink().setText("Less"),setTimeout(function(){this.getMoreList().setStyle("transition","none")}.bind(this),300)},collapseMoreList:function(){this.getMoreList().setStyle("max-height","0"),this.getShowMoreLink().setText("More")},expandMoreList:function(){this.getMoreList().setStyle("max-height",this.moreListHeight+"px"),this.getShowMoreLink().setText("Less")},recalculateMoreListHeight:function(){this.moreListHeight=this.getMoreList().getProperty("scrollHeight")}},{EL_HEADER_CLASS:"elWidgets-ExpandableList-header",EL_TOP_LIST_CLASS:"elWidgets-ExpandableList-topList",EL_MORE_LIST_CLASS:"elWidgets-ExpandableList-moreList",EL_SHOW_MORE_CLASS:"elWidgets-ExpandableList-showMore"});return s}),define("widgets/ExpandableList/ExpandableList",["widgets/WidgetCore","jscore/ext/mvp","./ExpandableListView","./ExpandableListItem/ExpandableListItem"],function(e,t,i,s){"use strict";function n(){o.call(this);var e=0;this.collection.each(function(t){for(var i=this.options.labelKey.split("."),n=t.get(i[0]),o=1;o<i.length;o++)n=n[i[o]];var l=new s({label:n,callback:a.bind(this),model:t});this.itemWidgets.push(l),this.showAll||e<this.shownItems?l.attachTo(this.view.getTopList()):l.attachTo(this.view.getMoreList()),e++}.bind(this)),this.collection.size()>this.shownItems&&!this.showAll&&this.view.showShowMoreLink(),setTimeout(function(){this.moreListExpanded&&this.view.expandMoreList(),this.view.recalculateMoreListHeight()}.bind(this),1)}function o(){for(var e=0;e<this.itemWidgets.length;e++)this.itemWidgets[e].destroy()}function a(e){this.trigger("itemClick",e)}return e.extend({init:function(e){if(!e.items)throw new Error("ExpandableList requires an items attribute");this.view=new i(e),this.options=e,this.itemWidgets=[],this.moreListExpanded=!1,this.shownItems=5,this.showAll=!1,this.collection=this.options.items instanceof t.Collection?this.options.items:new t.Collection(this.options.items),this.options.labelKey=this.options.labelKey||"name",this.shownItems=this.options.shownItems||this.shownItems,this.showAll=this.options.showAll||this.showAll},onViewReady:function(){this.collection.addEventHandler("add",n,this),this.collection.addEventHandler("remove",n,this),this.collection.addEventHandler("reset",n,this),n.call(this),this.view.getShowMoreLink().addEventHandler("click",this.toggleListExpansion,this)},toggleListExpansion:function(e){e&&e.preventDefault(),this.moreListExpanded?(this.view.animateCollapseMoreList(),this.moreListExpanded=!1):(this.view.animateExpandMoreList(),this.moreListExpanded=!0)}})}),define("widgets/ExpandableList",["widgets/ExpandableList/ExpandableList"],function(e){return e});
/* Copyright (c) Ericsson 2019 */

define("widgets/utils/datePickerUtils",["i18n","i18n/AdvancedDateTime"],function(e,t){"use strict";var n,a={DATE_PATTERN:/(\d+)[^\d:]+(\d+)[^\d:]+(\d+)/,TIME_PATTERN:/(\d+):(\d+)(?::(\d+))?/,PLACEHOLDER_PATTERN:/(YYYY|MM|DD)/g,setMonthNameArray:function(e){n=e},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},isToday:function(e,t,n){var a=new Date;return a.getFullYear()===e&&a.getMonth()===t&&a.getDate()===n},_isIntlSupported:function(){return void 0!==window.Intl},_getDefaultWeekDayNames:function(){return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},_getLocalizedWeekDayNames:function(e){for(var t=new window.Intl.DateTimeFormat(a.getCurrentLocale(),{weekday:e}),n=[],r=1;r<=7;r++)n.push(t.format(new Date(2017,4,r)));return n},getDayNames:function(e){return this._isIntlSupported()?this._getLocalizedWeekDayNames(e||"long"):(e="short"===e?3:void 0,this._getDefaultWeekDayNames().map(function(t){return e?t.substr(0,e):t}))},_getDefaultMonthNames:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]},_getLocalizedMonthNames:function(){for(var e=[],t=new window.Intl.DateTimeFormat(a.getCurrentLocale(),{month:"long"}),n=0;n<12;n++)e.push(t.format(new Date(2017,n,1)));return e},getMonthName:function(e,t){return void 0===n&&(n=this._isIntlSupported()?this._getLocalizedMonthNames():this._getDefaultMonthNames()),t?n[e].substr(0,t):n[e]},formatToHumanReadable:function(e){if(null===e)return"";var t=[],n=e.getDate();n<10&&(n="0"+n),t.push(n),t.push(" "),t.push(this.getMonthName(e.getMonth(),3)),t.push(" "),t.push(e.getFullYear()),t.push(" ");var a=e.getHours();a<10&&(a="0"+a),t.push(a),t.push(":");var r=e.getMinutes();r<10&&(r="0"+r),t.push(r),t.push(":");var o=e.getSeconds();return o<10&&(o="0"+o),t.push(o),t.join("")},getDaysInMonth:function(e,t){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getMonthYearRelative:function(e,t,n){var a,r=t+n,o=Math.abs(r),i=e;return i+=Math.floor(r/12),n<0&&r<0?(a=r%12+12,12===a&&(a=0)):a=o%12,{year:i,month:a}},getWeekDayWhenMonthStarts:function(e,t){var n=new Date(e,t,1).getDay();return 0===n?7:n},getDays:function(e,t){var n=[],a=this.getWeekDayWhenMonthStarts(e,t)-1,r=this.getDaysInMonth(e,t),o=0;for(o;o<r;o++)n[a+o]=o+1;return n},removeTimeFromDate:function(e){if(0===arguments.length)throw new Error("No object passed in for DatePickerUtils.removeTimeFromDate");if(!(e instanceof Date))throw new Error("No date object passed in for DatePickerUtils.removeTimeFromDate");var t=this.cloneDate(e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},cloneDate:function(e){if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());throw new Error("No date object passed in for DatePickerUtils.cloneDate")},getBrowserLocale:function(){return"undefined"==typeof navigator?"root":((navigator.languages?navigator.languages[0]:navigator.language)||navigator.userLanguage||"root").toLowerCase()},getCurrentLocale:function(){return e.currentLocale},parseLocalizedDate:function(e,t){var n=t.match(this.DATE_PATTERN);if(n){n.splice(0,1);var a=e.match(this.PLACEHOLDER_PATTERN),r=parseInt(n[a.indexOf("YYYY")]),o=parseInt(n[a.indexOf("MM")]),i=parseInt(n[a.indexOf("DD")]);return{day:i,month:o,year:r}}var s=new Date;return{day:s.getDate(),month:s.getMonth(),year:s.getFullYear()}},formatDatetime:function(e,n,a,r){return r?t(e).mode(a).utc().format(n):t(e).mode(a).format(n)},makeBestDateTimeEstimate:function(e,t){var n={},a=t.match(this.DATE_PATTERN);if(a){a.splice(0,1);var r=e.match(this.PLACEHOLDER_PATTERN);n.year=parseInt(a[r.indexOf("YYYY")]),n.month=parseInt(a[r.indexOf("MM")]),n.day=parseInt(a[r.indexOf("DD")])}else{var o=new Date;n.day=o.getDate(),n.month=o.getMonth()+1,n.year=o.getFullYear()}var i=t.match(this.TIME_PATTERN);return i?(n.hours=i[1],n.minutes=i[2],n.seconds=i[3]):(n.hours=0,n.minutes=0,n.seconds=0),n}};return a});
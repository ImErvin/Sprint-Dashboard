/* Copyright (c) Ericsson 2019 */

define("widgets/utils/keyboardUtils",[],function(){"use strict";var t={},e={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46},n=function(e,n){var i,s=e.originalEvent.keyCode;if(Object.keys(n).some(function(e){if(t[e.toUpperCase()]===s)return i=n[e],!0}),i)return i(e)},i=function(t,e){if(!t||!e)throw new Error("Missing event argument");return t.addEventHandler("keydown",function(t){return n(t,e)})},s=function(t,e){e&&t.removeEventHandler(e)};return Object.keys(e).forEach(function(n){Object.defineProperty(t,n,{value:e[n],writable:!1})}),t.addKeyHandler=i,t.removeKeyHandler=s,t}),define("template!widgets/Tabs/TabItem/_tabItem.hbs",["jscore/handlebars/handlebars"],function(t){return t.template(function(t,e,n,i,s){function o(t,e){var n,i="";return i+='<span class="ebTabs-tabItem-icon">\n            <i class="ebIcon '+b((n=t&&t.icon,n=null==n||n===!1?n:n.prefix,typeof n===c?n.apply(t):n))+"_"+b((n=t&&t.icon,n=null==n||n===!1?n:n.name,typeof n===c?n.apply(t):n))+'"></i>\n        </span>'}function a(t,e){return"ebTabs-tabItem_closable_false"}function r(t,e){return'\n        <span class="ebTabs-closeBtn">\n        <i class="ebTabs-closeBtnIcon ebIcon ebIcon_close ebIcon_interactive"></i>\n        </span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var l,d="",c="function",b=this.escapeExpression,h=this;return d+='<div class="ebTabs-tabItemWrapper">\n    ',l=n.if.call(e,e&&e.icon,{hash:{},inverse:h.noop,fn:h.program(1,o,s)}),(l||0===l)&&(d+=l),d+='\n    <div class="ebTabs-tabItem ',l=n.unless.call(e,e&&e.closeable,{hash:{},inverse:h.noop,fn:h.program(3,a,s)}),(l||0===l)&&(d+=l),d+='" tabindex="0"></div>\n    ',l=n.if.call(e,e&&e.closeable,{hash:{},inverse:h.noop,fn:h.program(5,r,s)}),(l||0===l)&&(d+=l),d+="\n</div>\n\n"})}),define("widgets/Tabs/TabItem/TabItemView",["jscore/core","template!./_tabItem.hbs"],function(t,e){"use strict";return t.View.extend({getTemplate:function(){return e(this.options)},getCaption:function(){return this.getElement().find(".ebTabs-tabItem")},setCaption:function(t){this.getCaption().setText(t)},setSelected:function(t){t?this.getElement().find(".ebTabs-tabItem").setModifier("selected","true"):this.getElement().find(".ebTabs-tabItem").removeModifier("selected")},getCloseButton:function(){return this.getElement().find(".ebTabs-closeBtn")}})}),define("widgets/Tabs/TabItem/TabItem",["jscore/core","./TabItemView","../../utils/parserUtils","jscore/ext/utils"],function(t,e,n,i){"use strict";return t.Widget.extend({view:function(){return this._icon=n.parseIcons(this.options.icon),new e({icon:this._icon,closeable:this.options.closeable})},onViewReady:function(){this._enabled=!0,this.view.setCaption(this.options.title),this.options.closeable===!0&&this.view.getCloseButton().addEventHandler("click",function(t){t.stopPropagation(),this._enabled!==!1&&this.trigger("removetab")}.bind(this))},getDefinition:function(){var t=this.options;return{title:t.title,icon:void 0!==this._icon?i.clone(this._icon,!0):void 0,enabled:this._enabled,closeable:t.closeable}},getContent:function(){return this.options.content},setSelected:function(t){this.view.setSelected(t)},enable:function(){var t=this.view.getCaption();t.removeModifier("enabled"),t.setAttribute("tabindex","0"),this._enabled=!0},disable:function(){var t=this.view.getCaption();t.setModifier("enabled","false"),t.removeAttribute("tabindex"),this._enabled=!1}})}),define("template!widgets/Tabs/_tabs.hbs",["jscore/handlebars/handlebars"],function(t){return t.template(function(t,e,n,i,s){function o(t,e){return'\n            <div class="ebTabs-addBtn ebTabs-addBtn_enabled_true">\n                <div class="ebTabs-addBtnIcon">\n                    <i class="ebIcon ebIcon_plus ebTabs-addIcon"></i>\n                </div>\n            </div>\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var a,r="",l=this;return r+='<div class="ebTabs ebTabs_addClose">\n    <div class="ebTabs-top">\n        <div class="ebTabs-leftBtn">\n            <div class="ebTabs-leftBtnIcon">\n                <i class="ebIcon ebIcon_small ebIcon_leftArrow_10px"></i>\n            </div>\n        </div>\n        <div class="ebTabs-tabArea" role="tab"></div>\n        <div class="ebTabs-rightBtn">\n            <div class="ebTabs-rightBtnIcon">\n                <i class="ebIcon ebIcon_small ebIcon_rightArrow_10px"></i>\n            </div>\n        </div>\n        ',a=n.if.call(e,e&&e.showAddButton,{hash:{},inverse:l.noop,fn:l.program(1,o,s)}),(a||0===a)&&(r+=a),r+='\n    </div>\n    <div class="ebTabs-contentDiv"></div>\n</div>\n'})}),define("widgets/Tabs/TabsView",["jscore/core","template!./_tabs.hbs"],function(t,e){"use strict";return t.View.extend({getTemplate:function(){return e(this.options)},getLeftButton:function(){return this.getElement().find(".ebTabs-leftBtn")},getRightButton:function(){return this.getElement().find(".ebTabs-rightBtn")},setButtonsDisplayType:function(t){this.getLeftButton().setStyle("display",t),this.getRightButton().setStyle("display",t)},getTabArea:function(){return this.getElement().find(".ebTabs-tabArea")},getContent:function(){return this.getElement().find(".ebTabs-contentDiv")},getAddButton:function(){return this.getElement().find(".ebTabs-addBtn")},getTabsContainer:function(){return this.getElement().find(".ebTabs-top")}})}),define("widgets/Tabs/Tabs",["jscore/core","./TabsView","./TabItem/TabItem","widgets/utils/keyboardUtils","jscore/ext/privateStore"],function(t,e,n,i,s){"use strict";function o(e){"string"==typeof e.content&&(e.content=t.Element.parse(e.content));var s=new n(e);s.getElement().addEventHandler("click",function(){s._enabled&&a.call(this,s,e)}.bind(this)),s.getElement().addEventHandler("keypress",function(t){s._enabled&&t.originalEvent.keyCode===i.ENTER&&a.call(this,s,e),t.stopPropagation()}.bind(this)),s.addEventHandler("removetab",function(){this.trigger("tabclose",u(this).tabs.indexOf(s))}.bind(this)),s.attachTo(this.view.getTabArea()),u(this).tabs.push(s)}function a(t,e){var n=u(this).tabs.indexOf(t);this.setSelectedTab(n),this.trigger("tabselect",e.title,u(this).currentTab),c.call(this,u(this).currentTab)}function r(t){u(this).buttonInterval&&l.call(this),u(this).buttonInterval=setInterval(function(){d.call(this,t)}.bind(this),1e3/60)}function l(){clearInterval(u(this).buttonInterval),delete u(this).buttonInterval}function d(t){var e=this.view.getTabArea().getProperty("scrollLeft");this.view.getTabArea().setProperty("scrollLeft",e+t),b.call(this)}function c(t){if(void 0!==t){var e=u(this).tabs[t].getElement(),n=e.getProperty("offsetLeft"),i=e.getProperty("offsetWidth"),s=n+i,o=this.view.getTabArea(),a=o.getProperty("offsetWidth"),r=o.getProperty("scrollLeft"),l=r+a,c=l-n,b=c<i,h=c>a;if(h||b){var f=0;f=b?s-l:n-r,d.call(this,f)}}}function b(){var t=this.view.getTabArea(),e=t.getProperty("scrollLeft"),n=t.getProperty("scrollWidth"),i=t.getProperty("clientWidth");e<=0?(this.view.getLeftButton().setModifier("enabled","false"),this.view.getRightButton().removeModifier("enabled")):e>=n-i?(this.view.getRightButton().setModifier("enabled","false"),this.view.getLeftButton().removeModifier("enabled")):(this.view.getLeftButton().removeModifier("enabled"),this.view.getRightButton().removeModifier("enabled"))}function h(){var t=this.view.getTabArea().children();t.length>0&&(t[0].removeModifier("responsive"),t[Math.max(0,t.length-2)].removeModifier("responsive"),t[Math.max(0,t.length-1)].removeModifier("responsive"));for(var e=0,n=0;n<u(this).tabs.length;n++)e+=u(this).tabs[n].getElement().getProperty("offsetWidth");var i=this.view.getTabsContainer().getProperty("offsetWidth"),s=this.view.getAddButton();s&&(i-=s.getProperty("offsetWidth")),e>i?(this.view.setButtonsDisplayType("block"),this.view.getTabArea().setModifier("responsive"),t.length>0&&(t[0].setModifier("responsive"),t[t.length-1].setModifier("responsive"))):(this.view.setButtonsDisplayType("none"),this.view.getTabArea().removeModifier("responsive")),b.call(this)}var u=s.create();return t.Widget.extend({view:function(){return new e(this.options)},onViewReady:function(){this.view.setButtonsDisplayType("none"),u(this).showAddButton=this.options.showAddButton===!0,u(this).tabs=[];for(var t=this.options.tabs||[],e=0;e<t.length;e++)o.call(this,t[e],e);var n="ontouchstart"in window?"touchstart":"mousedown",i="ontouchstart"in window?"touchend":"mouseup",s=this.view.getLeftButton();s.addEventHandler(n,r.bind(this,-5)),s.addEventHandler(i,l.bind(this));var a=this.view.getRightButton();a.addEventHandler(n,r.bind(this,5)),a.addEventHandler(i,l.bind(this)),u(this).showAddButton&&this.view.getAddButton().addEventHandler("click",function(){this.trigger("tabadd",u(this).tabs.length)}.bind(this))},onDOMAttach:function(){h.call(this),u(this).previousWidth=this.getElement().getProperty("offsetWidth"),u(this).windowEvtId=t.Window.addEventHandler("resize",function(){var t=this.getElement().getProperty("offsetWidth");u(this).previousWidth!==t&&(u(this).previousWidth=t,this.redraw())}.bind(this)),void 0===u(this).previousTab&&u(this).tabs.length>0&&this.setSelectedTab(0)},redraw:function(){h.call(this),c.call(this,u(this).currentTab)},onDestroy:function(){var e=u(this).currentTab;void 0!==u(this).tabs[e]&&u(this).tabs[e].destroy(),u(this).windowEvtId&&t.Window.removeEventHandler(u(this).windowEvtId)},addTab:function(t,e,n,i){var s=t&&"object"==typeof t?t:{title:t,content:e,closeable:n,icon:i};return s.title&&s.content?(o.call(this,s,u(this).tabs.length),void h.call(this)):void console.error("Missing required parameter in addTab")},getTabsProperties:function(){return u(this).tabs.map(function(t){return t.getDefinition()})},clearTabs:function(){for(var t=0;t<u(this).tabs.length;t++)u(this).tabs[t].destroy();u(this).tabs=[],u(this).currentTab=void 0,u(this).previousContent&&u(this).previousContent.detach(),h.call(this)},disable:function(){},enable:function(){},enableTab:function(t){u(this).tabs[t].enable()},disableTab:function(t){u(this).tabs[t].disable()},removeLastTab:function(){this.removeTab(u(this).tabs.length-1)},removeTab:function(e){var n=u(this).tabs[e];n===u(this).previousTab&&(u(this).previousContent.detach(),u(this).tabs.length>1?0===e?this.setSelectedTab(1):this.setSelectedTab(e-1):u(this).currentTab=void 0),n.getContent()instanceof t.Region&&n.getContent().stop(),n.destroy(),u(this).tabs.splice(e,1),h.call(this)},setSelectedTab:function(e){var i=e instanceof n?e:u(this).tabs[e];if(void 0===i)throw new Error("Tab does not exist.");u(this).previousTab&&(u(this).previousContent.detach(),u(this).previousTab.setSelected(!1)),i.getContent()instanceof t.Element?this.view.getContent().append(i.getContent()):i.getContent()instanceof t.Region?i.getContent().isRunning()?i.getContent().attach(this.view.getContent()):i.getContent().start(this.view.getContent()):i.getContent().attachTo(this.view.getContent()),i.setSelected(!0),u(this).previousTab=i,u(this).previousContent=i.getContent(),e instanceof n||(u(this).currentTab=e,c.call(this,e))},setTabTitle:function(t,e){var n=u(this).tabs[t];if(void 0===n)throw new Error("Tab does not exist.");n.view.setCaption(e)},setContentHeight:function(t){this.view.getContent().setStyle("height",t)}})}),define("widgets/Tabs",["widgets/Tabs/Tabs"],function(t){return t});